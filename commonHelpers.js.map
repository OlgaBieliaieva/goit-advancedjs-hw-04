{"version":3,"file":"commonHelpers.js","sources":["../src/get-images.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/?';\nconst REQUEST_OPTIONS = {\n  key: '34369155-5d93acadffc22e75da017de5a',\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: 40,\n  page: 1,\n};\n\nexport async function getImages(value) {\n  if (REQUEST_OPTIONS.q !== value) {\n    REQUEST_OPTIONS.q = value;\n    REQUEST_OPTIONS.page = 1;\n  }\n  const options = new URLSearchParams(REQUEST_OPTIONS);\n  try {\n    const response = await axios.get(`${BASE_URL}${options}`);\n    REQUEST_OPTIONS.page += 1;\n    return response;\n  } catch (error) {\n    console.log(error);\n  }\n}\n","import './css/styles.css';\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { getImages } from './get-images';\n\nconst refs = {\n  searchForm: document.querySelector('.search-form'),\n  searchFormInput: document.querySelector('.search-form input'),\n  gallery: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.load-more'),\n};\n\nrefs.searchForm.addEventListener('submit', onSearch);\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\n\nlet queryValue = '';\n\nfunction onSearch(event) {\n  event.preventDefault();\n\n  refs.gallery.innerHTML = '';\n  refs.loadMoreBtn.classList.add('is-hidden');\n\n  const {\n    elements: { searchQuery },\n  } = event.currentTarget;\n\n  queryValue = searchQuery.value.trim().toLowerCase();\n\n  if (queryValue.length === 0) {\n    return;\n  }\n\n  getImages(queryValue).then(checkResult).catch(showError);\n}\n\nfunction checkResult(result) {\n  if (result.data.total === 0) {\n    iziToast.error({\n           message: 'Sorry, there are no images matching your search query. Please try again.',\n    });    \n    refs.searchFormInput.value = '';\n    return;\n  } else {\n    iziToast.success({\n      title: 'Hooray!',\n      message: `We found ${result.data.totalHits} images.`,\n    });   \n  }\n  createGalleryMarkup(result.data.hits);\n}\n\nfunction showError(error) {\n  console.log(error);\n}\n\nfunction createGalleryMarkup(data) {\n  const galleryMarkup = data\n    .map(\n      element => `<a class=\"item\" href=\"${element.largeImageURL}\">\n      <div class=\"photo-card\">\n  <img src=\"${element.webformatURL}\" alt=\"${element.tags}\" loading=\"lazy\" />\n  <div class=\"info\">\n    <p class=\"info-item\">\n      <b>Likes ${element.likes}</b>\n    </p>\n    <p class=\"info-item\">\n      <b>Views ${element.views}</b>\n    </p>\n    <p class=\"info-item\">\n      <b>Comments ${element.comments}</b>\n    </p>\n    <p class=\"info-item\">\n      <b>Downloads ${element.downloads}</b>\n    </p>\n  </div>\n</div></a>`\n    )\n    .join('');\n  showGallery(galleryMarkup);\n}\n\nfunction showGallery(markup) {\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n  refs.loadMoreBtn.classList.remove('is-hidden');\n\n  const lightbox = new SimpleLightbox('.gallery a');\n  lightbox.refresh();\n}\n\nfunction onLoadMore() {\n  getImages(queryValue).then(checkLoadMoreResult).catch(showError);\n}\n\nfunction checkLoadMoreResult(result) {\n  if (result.data.hits.length === 0) {\n    iziToast.warning({      \n      message: \"We're sorry, but you've reached the end of search results.\",\n    });    \n    refs.loadMoreBtn.classList.add('is-hidden');\n    return;\n  }\n  createGalleryMarkup(result.data.hits);\n}\n"],"names":["BASE_URL","REQUEST_OPTIONS","getImages","value","options","response","axios","error","refs","onSearch","onLoadMore","queryValue","event","searchQuery","checkResult","showError","result","iziToast","createGalleryMarkup","data","galleryMarkup","element","showGallery","markup","SimpleLightbox","checkLoadMoreResult"],"mappings":"owBAEA,MAAMA,EAAW,4BACXC,EAAkB,CACtB,IAAK,qCACL,EAAG,GACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAM,CACR,EAEO,eAAeC,EAAUC,EAAO,CACjCF,EAAgB,IAAME,IACxBF,EAAgB,EAAIE,EACpBF,EAAgB,KAAO,GAEzB,MAAMG,EAAU,IAAI,gBAAgBH,CAAe,EACnD,GAAI,CACF,MAAMI,EAAW,MAAMC,EAAM,IAAI,GAAGN,IAAWI,GAAS,EACxD,OAAAH,EAAgB,MAAQ,EACjBI,CACR,OAAQE,EAAP,CACA,QAAQ,IAAIA,CAAK,CAClB,CACH,CCpBA,MAAMC,EAAO,CACX,WAAY,SAAS,cAAc,cAAc,EACjD,gBAAiB,SAAS,cAAc,oBAAoB,EAC5D,QAAS,SAAS,cAAc,UAAU,EAC1C,YAAa,SAAS,cAAc,YAAY,CAClD,EAEAA,EAAK,WAAW,iBAAiB,SAAUC,CAAQ,EACnDD,EAAK,YAAY,iBAAiB,QAASE,CAAU,EAErD,IAAIC,EAAa,GAEjB,SAASF,EAASG,EAAO,CACvBA,EAAM,eAAc,EAEpBJ,EAAK,QAAQ,UAAY,GACzBA,EAAK,YAAY,UAAU,IAAI,WAAW,EAE1C,KAAM,CACJ,SAAU,CAAE,YAAAK,CAAa,CAC7B,EAAMD,EAAM,cAEVD,EAAaE,EAAY,MAAM,KAAM,EAAC,YAAW,EAE7CF,EAAW,SAAW,GAI1BT,EAAUS,CAAU,EAAE,KAAKG,CAAW,EAAE,MAAMC,CAAS,CACzD,CAEA,SAASD,EAAYE,EAAQ,CAC3B,GAAIA,EAAO,KAAK,QAAU,EAAG,CAC3BC,EAAS,MAAM,CACR,QAAS,0EACpB,CAAK,EACDT,EAAK,gBAAgB,MAAQ,GAC7B,MACJ,MACIS,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,YAAYD,EAAO,KAAK,mBACvC,CAAK,EAEHE,EAAoBF,EAAO,KAAK,IAAI,CACtC,CAEA,SAASD,EAAUR,EAAO,CACxB,QAAQ,IAAIA,CAAK,CACnB,CAEA,SAASW,EAAoBC,EAAM,CACjC,MAAMC,EAAgBD,EACnB,IACCE,GAAW,yBAAyBA,EAAQ;AAAA;AAAA,cAEpCA,EAAQ,sBAAsBA,EAAQ;AAAA;AAAA;AAAA,iBAGnCA,EAAQ;AAAA;AAAA;AAAA,iBAGRA,EAAQ;AAAA;AAAA;AAAA,oBAGLA,EAAQ;AAAA;AAAA;AAAA,qBAGPA,EAAQ;AAAA;AAAA;AAAA,WAIxB,EACA,KAAK,EAAE,EACVC,EAAYF,CAAa,CAC3B,CAEA,SAASE,EAAYC,EAAQ,CAC3Bf,EAAK,QAAQ,mBAAmB,YAAae,CAAM,EACnDf,EAAK,YAAY,UAAU,OAAO,WAAW,EAE5B,IAAIgB,EAAe,YAAY,EACvC,QAAO,CAClB,CAEA,SAASd,GAAa,CACpBR,EAAUS,CAAU,EAAE,KAAKc,CAAmB,EAAE,MAAMV,CAAS,CACjE,CAEA,SAASU,EAAoBT,EAAQ,CACnC,GAAIA,EAAO,KAAK,KAAK,SAAW,EAAG,CACjCC,EAAS,QAAQ,CACf,QAAS,4DACf,CAAK,EACDT,EAAK,YAAY,UAAU,IAAI,WAAW,EAC1C,MACD,CACDU,EAAoBF,EAAO,KAAK,IAAI,CACtC"}